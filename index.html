<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Block Blast Sederhana</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #fff;
    text-align: center;
    margin: 0;
    padding: 20px;
  }

  h1 {
    margin-bottom: 10px;
  }

  #game {
    display: grid;
    grid-template-columns: repeat(10, 35px);
    grid-template-rows: repeat(10, 35px);
    gap: 2px;
    margin: 20px auto;
    background: #444;
    width: max-content;
    padding: 5px;
    border-radius: 10px;
  }

  .cell {
    width: 35px;
    height: 35px;
    background: #333;
    border-radius: 5px;
    cursor: pointer;
  }

  .filled {
    background: #29b6f6;
  }

  #nextShape {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
  }

  .block {
    display: inline-block;
    background: #ffca28;
    width: 25px;
    height: 25px;
    margin: 1px;
    border-radius: 4px;
  }

  button {
    background: #29b6f6;
    border: none;
    color: #fff;
    padding: 10px 20px;
    font-size: 16px;
    margin-top: 10px;
    border-radius: 6px;
    cursor: pointer;
  }

  button:hover {
    background: #0288d1;
  }
</style>
</head>
<body>
  <h1>ðŸ§± Block Blast Sederhana</h1>
  <p>Klik di papan untuk menempatkan blok!</p>
  <div id="game"></div>
  <div id="nextShape"></div>
  <button id="resetBtn">Reset Game</button>

<script>
  const ROWS = 10;
  const COLS = 10;
  const gameBoard = document.getElementById("game");
  const nextShapeContainer = document.getElementById("nextShape");

  let board = [];
  let nextShape = [];

  // Daftar bentuk blok
  const SHAPES = [
    [[1,1],[1,1]],
    [[1,1,1]],
    [[1],[1],[1]],
    [[1,1,1],[0,1,0]],
    [[1,1,0],[0,1,1]]
  ];

  function createBoard() {
    board = [];
    gameBoard.innerHTML = "";
    for (let r = 0; r < ROWS; r++) {
      const row = [];
      for (let c = 0; c < COLS; c++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.addEventListener("click", () => placeShape(r, c));
        gameBoard.appendChild(cell);
        row.push(0);
      }
      board.push(row);
    }
  }

  function drawBoard() {
    const cells = document.querySelectorAll(".cell");
    cells.forEach(cell => {
      const r = parseInt(cell.dataset.row);
      const c = parseInt(cell.dataset.col);
      if (board[r][c]) cell.classList.add("filled");
      else cell.classList.remove("filled");
    });
  }

  function newShape() {
    nextShapeContainer.innerHTML = "";
    nextShape = SHAPES[Math.floor(Math.random() * SHAPES.length)];
    nextShape.forEach(row => {
      const rowDiv = document.createElement("div");
      row.forEach(val => {
        const block = document.createElement("div");
        if (val) block.classList.add("block");
        rowDiv.appendChild(block);
      });
      nextShapeContainer.appendChild(rowDiv);
    });
  }

  function canPlace(r, c) {
    for (let y = 0; y < nextShape.length; y++) {
      for (let x = 0; x < nextShape[y].length; x++) {
        if (nextShape[y][x]) {
          const newR = r + y;
          const newC = c + x;
          if (newR >= ROWS || newC >= COLS || board[newR][newC]) return false;
        }
      }
    }
    return true;
  }

  function placeShape(r, c) {
    if (!canPlace(r, c)) return alert("Tidak bisa menempatkan di sini!");
    for (let y = 0; y < nextShape.length; y++) {
      for (let x = 0; x < nextShape[y].length; x++) {
        if (nextShape[y][x]) {
          board[r + y][c + x] = 1;
        }
      }
    }
    clearLines();
    drawBoard();
    newShape();
  }

  function clearLines() {
    // Hapus baris penuh
    for (let r = 0; r < ROWS; r++) {
      if (board[r].every(cell => cell === 1)) {
        board.splice(r, 1);
        board.unshift(new Array(COLS).fill(0));
      }
    }

    // Hapus kolom penuh
    for (let c = 0; c < COLS; c++) {
      if (board.every(row => row[c] === 1)) {
        for (let r = 0; r < ROWS; r++) {
          board[r][c] = 0;
        }
      }
    }
  }

  document.getElementById("resetBtn").addEventListener("click", () => {
    createBoard();
    newShape();
  });

  // Inisialisasi game
  createBoard();
  newShape();
</script>
</body>
</html>
